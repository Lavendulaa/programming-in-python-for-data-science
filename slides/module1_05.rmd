---
  title: "Module1_01"
output: 
  md_document:
  variant: gfm
---

```{r setup, include=FALSE}
library(rmarkdown)
knitr::opts_chunk$set(echo = TRUE)
knitr_opts <- knitr_options( opts_knit = NULL,
                             opts_chunk = NULL,
                             knit_hooks = NULL,
                             opts_hooks = NULL,
                             opts_template = NULL)
md_document_custom <- md_document(variant = "gfm")
output_format(knitr = knitr_opts,
              pandoc = NULL,
              base_format = md_document_custom)
library(reticulate)
```


type: slides

Congratulations on writing your first code! This is great! We have read in our data and know the dimensions. What now? Let's go over how we would **index**, **slice** and  **select** certain columns or rows of our data.

Notes: Script here.
<html>
<audio controls >
  <source src="placeholder_audio.mp3" />
</audio></html>


---
## Cereal Data


Let's import pandas and bring in our dataset named `cereal.csv` using the name of the candy bar as the index like we did last time with `index_col=0`.


```{python echo=}
import pandas as pd
  
df = pd.read_csv('cereal.csv', index_col=0)
df.head()
```

  
Notes: Script here.
<html>
<audio controls >
<source src="placeholder_audio.mp3" />
</audio></html>
    
---

## Indexing Dataframes
    
We can see 7 of the 15 columns of the dataframe and the first 5 rows of the data.
Let's say we only want certain rows of the whole dataframe or certain columns.

We talked about how `df.head()` will generate the first few rows (5 as default) of a dataframe but what if we wanted rows 5-10?

The first column of this dataframe is called the `index`. This is what we specified with `index_col=0` when we read in our data. Each row is given a label as well as a position. In this case, the label of an observation is the cereal name and the index position is a number. In other cases, the index label could be named with a number. 

Notes: Script here.
<html>
<audio controls >
<source src="placeholder_audio.mp3" />
</audio></html>

---

Here are the first 15 rows of the dataframe: 

```{python}
df.head(15)
```

Notes: Script here.
<html>
<audio controls >
<source src="placeholder_audio.mp3" />
</audio></html>

---

Let's talk about the observation named `Almond Delight`.  Its index label is `Almond Delight` but its index position is 4.    
If you just went and counted those again and started screaming "5! It's the fifth position", that's ok. In the Python language, we start counting at position 0 (then 1, 2, 3, and 4 for Almond Delight).
  
Notes: Script here.
<html>
<audio controls >
<source src="placeholder_audio.mp3" />
</audio></html>
    
---

So now let's say we want 5 rows past `Almond Delight` so we want rows with the index labels `Apple Cinnamon Cheerios` to `Cap'n'Crunch`.  

How would we do this?   

There are 3 main ways:
- `.loc[]` using index labels
- `.iloc[]` using index position
- Using `[]` brackets (we will get into that more next module)

Notes: Script here.
<html>
<audio controls >
<source src="placeholder_audio.mp3" />
</audio></html>

---

In the first case:

``` Python
df.loc[ "Apple Cinnamon Cheerios" : "Cap'n'Crunch"]
```


```out


```

<img src='module1/apple-captain.png'>

 This essentially means the _dataframe location from `Apple Cinnamon Cheerios` to `Cap'n'Crunch`._   
What about if we only wanted certain columns as well?

Notes: Script here.
<html>
<audio controls >
  <source src="placeholder_audio.mp3" />
</audio></html>

---

Perhaps we were only interested in the `calories` to `fiber` columns of those rows?


``` Python
df.loc[ "Apple Cinnamon Cheerios" : "Cap'n'Crunch", "calories" : "fiber"]
```


```out


```

<img src='module1/cals-fiber.png'>


So `loc` is used to slice columns and rows by **label** and within an interval.

Notes: Script here.
<html>
<audio controls >
  <source src="placeholder_audio.mp3" />
</audio></html>

---

What if we wanted all the rows of the dataframe but only the columns `calories` to `fiber`?

we would simply use `:` to indicate from "end" to "end" for rows.

``` Python
df.loc[ : , "calories" : "fiber"]
```


```out


```

<img src='module1/rows-somecols.png' width="40%">



Notes: Script here.
<html>
<audio controls >
  <source src="placeholder_audio.mp3" />
</audio></html>

---

What about if we only wanted certain columns as well?
Perhaps we were only interested in the `calories` to `fiber` columns?

``` Python
df.loc[ "Apple Cinnamon Cheerios" : "Cap'n'Crunch", "calories" : "fiber"]
```


```out


```

<img src='module1/cals-fiber.png'>


Notes: Script here.
<html>
<audio controls >
  <source src="placeholder_audio.mp3" />
</audio></html>

---

We discussed slicing when the indices are labeled with words but that's not always the case. What if they are labeled with a numbers?
    Let's go back to our original cereal dataframe we had when we uploaded it.

<img src='module1/cereal-index-num.png'>


Notes: Script here.
<html>
<audio controls >
  <source src="placeholder_audio.mp3" />
</audio></html>

---

We can use the same format before but now since our rows are labeled with numbers, we no longer need to express the row labels in "quotations". We use row labels expressed as numbers without quotations.

`df.loc[ row-name-start : row-name-end , "column name start" : "column name end"]`

Let's give our past example a shot. We again want rows `Apple Cinnamon Cheerios` to `Cap'n'Crunch with all the columns but now the indices are labeled with numbers.
  
  ``` Python
  df.loc[ 5 : 10 ]
  ```
  
  
  ```out
  
  
  ```
  
  <img src='module1/cereal510.png' >
    
    Notes: Script here.
  <html>
    <audio controls >
    <source src="placeholder_audio.mp3" />
    </audio></html>
    
    ---
    What if we wanted only certain columns again too? Note that now `name` is a column now.
  
  ``` Python
  df.loc[ 5 : 10 , "calories" : "fiber"]
  ```
  
  
  ```out
  
  
  ```
  
  <img src='module1/cereal-510-cf.png' width = "40%">
    
    The sliced dataframe no longer has `name` in it so we would have to include it in our slice. In the next slide deck we will talk about selecting specific columns and rows that are not consecutive.  
  
  Notes: Script here.
  <html>
    <audio controls >
    <source src="placeholder_audio.mp3" />
    </audio></html>
    
    ---
    
    This now incorporates all the columns from `names` to `fiber`.
  
  ``` Python
  df.loc[ 5 : 10 , "name" : "fiber"]
  ```
  
  
  ```out
  
  
  ```
  
  <img src='module1/cereal-510-nf.png'  width = "60%">
    
    Notes: Script here.
  <html>
    <audio controls >
    <source src="placeholder_audio.mp3" />
    </audio></html>
    
    ---
    
    ## So Far
    
    `loc` is used to slice columns and rows by **label** and within an interval.
  We always specify **row** indexing first, then **columns**.
  
  ```
  df.loc[ "row name start" : "row name end", "column name start" : "column name end"]
  ```
  
  - If we arn't slicing any columns we can simply say `df.loc[ "row name start" : "row name end"]` since columns specification follow row's.
  - However, the reverse is not true. If we want all the rows with only specific columns, we specify rows first and therefore we would need to make it clear with `df.loc[  : , "column name start" : "column name end"]`.
  - We can read `:` as **"to"**
    - If the indices are labeled with numbers, we do not need "quotations" when calling them.
  
  Notes: Script here.
  <html>
    <audio controls >
    <source src="placeholder_audio.mp3" />
    </audio></html>
    
    ---
    
    # letâ€™s apply what we learned!
    
    Notes: Script here
  <html>
    <audio controls >
    <source src="placeholder_audio.mp3" />
    </audio></html>
    